import base64
exec(base64.b64decode(b'aW1wb3J0IHJlcXVlc3RzCmltcG9ydCB0aW1lCmltcG9ydCBvcwpmcm9tIGNvbG9yYW1hIGltcG9ydCBpbml0LCBGb3JlLCBTdHlsZQoKaW5pdChhdXRvcmVzZXQ9VHJ1ZSkKCmRlZiBhcHByb3ZhbCgpOgogICAgIiIiQ2xlYXIgdGhlIHRlcm1pbmFsIHNjcmVlbi4iIiIKICAgIGlmIG9zLm5hbWUgPT0gJ250JzogICMgRm9yIFdpbmRvd3MKICAgICAgICBvcy5zeXN0ZW0oJ2NscycpCiAgICBlbHNlOiAgIyBGb3IgTGludXgvbWFjT1MKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKCmRlZiByYWpfbG9nbygpOgogICAgIiIiRGlzcGxheSB0aGUgbG9nbyBhbmQgY2xlYXIgdGhlIHNjcmVlbiBhZnRlciBkaXNwbGF5aW5nIGl0LiIiIgogICAgbG9nbyA9IHIiIiIKIF9fX19fIF9fX18gIF8gIF8gIF9fX18gCi8gIF9fLy8gIF9fXC8gXC8gXC8gICBfXAp8ICBcICB8ICBcL3x8IHx8IHx8ICAvICAKfCAgL18gfCAgICAvfCB8fCB8fCAgXF9fClxfX19fXFxfL1xfXFxfL1xfL1xfX19fLwogICAgIiIiLmZvcm1hdChGb3JlLllFTExPVywgRm9yZS5HUkVFTiwgRm9yZS5DWUFOLCBGb3JlLk1BR0VOVEEsIEZvcmUuQkxVRSwgRm9yZS5XSElURSkKCiAgICBwcmludChGb3JlLk1BR0VOVEEgKyBTdHlsZS5CUklHSFQgKyBsb2dvKQoKZGVmIHNob3dfdGVybXV4X21lc3NhZ2UoKToKICAgICIiIkRpc3BsYXkgdGhlIGN1c3RvbSBtZXNzYWdlIGFmdGVyIHRoZSBsb2dvLiIiIgogICAgdGVybXV4X21lc3NhZ2UgPSByIiIiCuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlwrilZEgIHswfVdPTkVSICAgICAgOiBFUklJQyBFWE8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEK4pWRICB7MX1SVUxMM1ggICAgIDogQlJPVEhFUiBIT09EIFJVTEVYICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgezF9RkFDRUJPSyAgICA6IOKdruKdriAg8JOGqca3zITEscy9xLHMvcm84LSxzrfMmvCThqogIOKdr+KdryAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRCuKVkSAgezJ9UlVMUyAgICAgICA6IE1VTFRJIFRPS0VOIENPTlZPICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKVkQrilZEgIHszfUdJVEhVQiAgICAgOiBFUklJQyBFWE8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEgCuKVkSAgezF9V0g5VFM5UCAgICA6ICs5Nzc5ODA3MjgwODg2ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKVkQrilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ0KIiIiLmZvcm1hdChGb3JlLlJFRCwgRm9yZS5HUkVFTiwgRm9yZS5CTFVFLCBGb3JlLldISVRFKQogICAgcHJpbnQoRm9yZS5HUkVFTiArIFN0eWxlLkJSSUdIVCArIHRlcm11eF9tZXNzYWdlKQoKZGVmIGZldGNoX3Byb2ZpbGVfbmFtZShhY2Nlc3NfdG9rZW4pOgogICAgIiIiRmV0Y2ggdGhlIHByb2ZpbGUgbmFtZSB1c2luZyB0aGUgdG9rZW4uIiIiCiAgICB0cnk6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lIiwgcGFyYW1zPXsiYWNjZXNzX3Rva2VuIjogYWNjZXNzX3Rva2VufSkKICAgICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpLmdldCgibmFtZSIsICJVbmtub3duIikKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlJlcXVlc3RFeGNlcHRpb246CiAgICAgICAgcmV0dXJuICJVbmtub3duIgoKZGVmIGZldGNoX3RhcmdldF9uYW1lKHRhcmdldF9pZCwgYWNjZXNzX3Rva2VuKToKICAgICIiIkZldGNoIHRoZSB0YXJnZXQgcHJvZmlsZSBuYW1lIHVzaW5nIHRoZSB0YXJnZXQgSUQgYW5kIHRva2VuLiIiIgogICAgdHJ5OgogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KGYiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20ve3RhcmdldF9pZH0iLCBwYXJhbXM9eyJhY2Nlc3NfdG9rZW4iOiBhY2Nlc3NfdG9rZW59KQogICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKQogICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkuZ2V0KCJuYW1lIiwgIlVua25vd24gVGFyZ2V0IikKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlJlcXVlc3RFeGNlcHRpb246CiAgICAgICAgcmV0dXJuICJVbmtub3duIFRhcmdldCIKCmRlZiBzZW5kX21lc3NhZ2VzKHRva2Vuc19maWxlLCB0YXJnZXRfaWQsIG1lc3NhZ2VzX2ZpbGUsIGhhdGVyc19uYW1lLCBzcGVlZCk6CiAgICAiIiJTZW5kIG1lc3NhZ2VzIHRvIHRoZSB0YXJnZXQgcHJvZmlsZS4iIiIKICAgIHdpdGggb3BlbihtZXNzYWdlc19maWxlLCAiciIpIGFzIGZpbGU6CiAgICAgICAgbWVzc2FnZXMgPSBmaWxlLnJlYWRsaW5lcygpCiAgICB3aXRoIG9wZW4odG9rZW5zX2ZpbGUsICJyIikgYXMgZmlsZToKICAgICAgICB0b2tlbnMgPSBbdG9rZW4uc3RyaXAoKSBmb3IgdG9rZW4gaW4gZmlsZS5yZWFkbGluZXMoKV0KCiAgICAjIEZldGNoIHRoZSBwcm9maWxlIG5hbWUgZm9yIGVhY2ggdG9rZW4KICAgIHRva2VuX3Byb2ZpbGVzID0ge3Rva2VuOiBmZXRjaF9wcm9maWxlX25hbWUodG9rZW4pIGZvciB0b2tlbiBpbiB0b2tlbnN9CgogICAgIyBGZXRjaCB0aGUgdGFyZ2V0IHByb2ZpbGUgbmFtZQogICAgdGFyZ2V0X3Byb2ZpbGVfbmFtZSA9IGZldGNoX3RhcmdldF9uYW1lKHRhcmdldF9pZCwgdG9rZW5zWzBdKSAgIyBVc2luZyB0aGUgZmlyc3QgdG9rZW4gZm9yIHRoZSB0YXJnZXQgZmV0Y2gKCiAgICBoZWFkZXJzID0gewogICAgICAgICJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIiwKICAgIH0KCiAgICB3aGlsZSBUcnVlOgogICAgICAgIGZvciBtZXNzYWdlX2luZGV4LCBtZXNzYWdlIGluIGVudW1lcmF0ZShtZXNzYWdlcyk6CiAgICAgICAgICAgIHRva2VuX2luZGV4ID0gbWVzc2FnZV9pbmRleCAlIGxlbih0b2tlbnMpCiAgICAgICAgICAgIGFjY2Vzc190b2tlbiA9IHRva2Vuc1t0b2tlbl9pbmRleF0KICAgICAgICAgICAgc2VuZGVyX25hbWUgPSB0b2tlbl9wcm9maWxlcy5nZXQoYWNjZXNzX3Rva2VuLCAiVW5rbm93biBTZW5kZXIiKQogICAgICAgICAgICBmdWxsX21lc3NhZ2UgPSBmIntoYXRlcnNfbmFtZX0ge21lc3NhZ2Uuc3RyaXAoKX0iCgogICAgICAgICAgICB1cmwgPSBmImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxNy4wL3Rfe3RhcmdldF9pZH0iCiAgICAgICAgICAgIHBhcmFtZXRlcnMgPSB7ImFjY2Vzc190b2tlbiI6IGFjY2Vzc190b2tlbiwgIm1lc3NhZ2UiOiBmdWxsX21lc3NhZ2V9CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucG9zdCh1cmwsIGpzb249cGFyYW1ldGVycywgaGVhZGVycz1oZWFkZXJzKQogICAgICAgICAgICAgICAgcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgICAgICAgICAgICBjdXJyZW50X3RpbWUgPSB0aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSTolTTolUyAlcCIpCiAgICAgICAgICAgICAgICBwcmludChGb3JlLkdSRUVOICsgZiJcbuKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCIpCiAgICAgICAgICAgICAgICBwcmludChGb3JlLkNZQU4gKyBmIlvinJRdIHtGb3JlLllFTExPV31NZXNzYWdlIHttZXNzYWdlX2luZGV4ICsgMX0gU3VjY2Vzc2Z1bGx5IFNlbnQhIikKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuQ1lBTiArIGYiW/CfkaRdIFNlbmRlcjoge0ZvcmUuTUFHRU5UQX17c2VuZGVyX25hbWV9IikKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuQ1lBTiArIGYiW/Cfk6ldIFRhcmdldDoge0ZvcmUuTUFHRU5UQX17dGFyZ2V0X3Byb2ZpbGVfbmFtZX0gKHt0YXJnZXRfaWR9KSIpCiAgICAgICAgICAgICAgICBwcmludChGb3JlLkNZQU4gKyBmIlvwn5OoXSBNZXNzYWdlOiB7Rm9yZS5MSUdIVEdSRUVOX0VYfXtmdWxsX21lc3NhZ2V9IikKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuQ1lBTiArIGYiW+KPsF0gVGltZToge0ZvcmUuTElHSFRCTFVFX0VYfXtjdXJyZW50X3RpbWV9IikKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuR1JFRU4gKyBmIuKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmFxuIikKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuWUVMTE9XICsgIlwwMzNbMTszN208PD09PT09PT09IE1BREUgQlkgRVJJSUMtRVhPRk9SVPCfmIjwn6m3ID09PT09PT4+IikKICAgICAgICAgICAgICAgIHByaW50KCJcbiIgKyAoIuKUgCIgKiA4MCkgKyAiXG4iKQogICAgICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uOgogICAgICAgICAgICAgICAgY29udGludWUgICMgSWdub3JlIGVycm9yIGFuZCBjb250aW51ZSBzZW5kaW5nIG5leHQgbWVzc2FnZQogICAgICAgICAgICB0aW1lLnNsZWVwKHNwZWVkKQogICAgICAgIHByaW50KEZvcmUuQ1lBTiArICJcblsrXSBBbGwgbWVzc2FnZXMgc2VudC4gUmVzdGFydGluZyB0aGUgcHJvY2Vzcy4uLlxuIikKCmRlZiBmZXRjaF9wYXNzd29yZF9mcm9tX3Bhc3RlYmluKHBhc3RlYmluX3VybCk6CiAgICAiIiJGZXRjaCB0aGUgcGFzc3dvcmQgZnJvbSB0aGUgcHJvdmlkZWQgUGFzdGViaW4gVVJMLiIiIgogICAgdHJ5OgogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KHBhc3RlYmluX3VybCkKICAgICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dC5zdHJpcCgpICAjIFJldHVybiB0aGUgcGFzc3dvcmQgZnJvbSB0aGUgUGFzdGViaW4gbGluawogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVxdWVzdEV4Y2VwdGlvbjoKICAgICAgICBleGl0KDEpICAjIEV4aXQgaWYgdGhlIHBhc3RlYmluIHJlcXVlc3QgZmFpbHMKCmRlZiBtYWluKCk6CiAgICBhcHByb3ZhbCgpICAjIENsZWFyIHNjcmVlbiBiZWZvcmUgZGlzcGxheWluZyB0aGUgbG9nbwogICAgcmFqX2xvZ28oKSAgIyBEaXNwbGF5IGxvZ28KICAgIHNob3dfdGVybXV4X21lc3NhZ2UoKSAgIyBTaG93IHRoZSBjdXN0b20gbWVzc2FnZQoKICAgIHBhc3RlYmluX3VybCA9ICJodHRwczovL3Bhc3RlYmluLmNvbS9yYXcvUDZ1MkZCdGQiICAjIFVSTCBvZiB0aGUgcGFzdGViaW4gY29udGFpbmluZyB0aGUgcGFzc3dvcmQKCiAgICAjIEZldGNoIHBhc3N3b3JkIGZyb20gUGFzdGViaW4KICAgIGNvcnJlY3RfcGFzc3dvcmQgPSBmZXRjaF9wYXNzd29yZF9mcm9tX3Bhc3RlYmluKHBhc3RlYmluX3VybCkKCiAgICAjIFBhc3N3b3JkIHZhbGlkYXRpb24KICAgIHByaW50KEZvcmUuQ1lBTiArICJbK10gUGxlYXNlIGVudGVyIHRoZSBwYXNzd29yZCB0byBwcm9jZWVkLiIpCiAgICAKICAgIGVudGVyZWRfcGFzc3dvcmQgPSBpbnB1dChGb3JlLkdSRUVOICsgIlsrXSBFbnRlciBQYXNzd29yZDogIikuc3RyaXAoKQoKICAgIGlmIGVudGVyZWRfcGFzc3dvcmQgIT0gY29ycmVjdF9wYXNzd29yZDoKICAgICAgICBwcmludChGb3JlLlJFRCArICJbeF0gSW5jb3JyZWN0IHBhc3N3b3JkLiBFeGl0aW5nIHByb2dyYW0uIikKICAgICAgICBleGl0KDEpICAjIEV4aXQgdGhlIHByb2dyYW0gaWYgcGFzc3dvcmQgaXMgaW5jb3JyZWN0CgogICAgYXBwcm92YWwoKSAgIyBDbGVhciBzY3JlZW4gYmVmb3JlIHN0YXJ0aW5nIGlucHV0cwogICAgdG9rZW5zX2ZpbGUgPSBpbnB1dChGb3JlLkdSRUVOICsgIlsrXSBFTlRFUi1USEUtVE9LRU5TLUZJTEU9Pj4gIikuc3RyaXAoKQoKICAgIGFwcHJvdmFsKCkgICMgQ2xlYXIgc2NyZWVuIGJlZm9yZSBmdXJ0aGVyIGlucHV0cwogICAgdGFyZ2V0X2lkID0gaW5wdXQoRm9yZS5ZRUxMT1cgKyAiWytdIEVOVEVSLVRIRS1UQVJHRVQtSUQ9Pj4gIikuc3RyaXAoKQogICAgCiAgICBhcHByb3ZhbCgpICAjIENsZWFyIHNjcmVlbiBiZWZvcmUgZnVydGhlciBpbnB1dHMKICAgIG1lc3NhZ2VzX2ZpbGUgPSBpbnB1dChGb3JlLllFTExPVyArICJbK10gRU5URVItLS0tLUdBTEktRklMRT0+PiAiKS5zdHJpcCgpCgogICAgYXBwcm92YWwoKSAgIyBDbGVhciBzY3JlZW4gYmVmb3JlIGZ1cnRoZXIgaW5wdXRzCiAgICBoYXRlcnNfbmFtZSA9IGlucHV0KEZvcmUuWUVMTE9XICsgIlsrXSBFTlRFUi1IQVRFUi1OQU1FPT4+ICIpLnN0cmlwKCkKICAgIAogICAgYXBwcm92YWwoKSAgIyBDbGVhciBzY3JlZW4gYmVmb3JlIGFza2luZyBmb3Igc3BlZWQKICAgIHNwZWVkID0gZmxvYXQoaW5wdXQoRm9yZS5HUkVFTiArICJbK10gRU5URVIgVEhFIFNQRUVEIChJTiBTRUNPTkRTKSBCRVRXRUVOIE1FU1NBR0VTPT4+ICIpLnN0cmlwKCkpCgogICAgc2VuZF9tZXNzYWdlcyh0b2tlbnNfZmlsZSwgdGFyZ2V0X2lkLCBtZXNzYWdlc19maWxlLCBoYXRlcnNfbmFtZSwgc3BlZWQpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbigp'))